<!doctype html>
<html lang="en">
<head>
  <%- include('../partials/head', { title: site ? 'Edit Site' : 'Create Site' }) %>
</head>
<body>
  <%- include('../partials/nav') %>

  <main class="container py-4">

    <h1 class="h3 mb-4">
      <%= site ? ('Edit Site #' + site.number) : 'Create New Site' %>
    </h1>

    <!-- Error Display (Bootstrap Modal Compatible) -->
    <% if (typeof error !== 'undefined' && error) { %>
      <div class="alert alert-danger"><%= error %></div>
    <% } %>

    <form method="post" action="<%= site ? ('/admin/sites/' + site.id + '/edit') : '/admin/sites/new' %>">
      
      <!-- Site Number -->
      <div class="mb-3">
        <label class="form-label">Site Number</label>
        <input 
          type="number" 
          class="form-control"
          name="number"
          required
          value="<%= site ? site.number : '' %>"
        >
      </div>

      <!-- Site Type -->
      <div class="mb-3">
        <label class="form-label">Type (e.g., RV, Tent, Pull-through)</label>
        <input 
          class="form-control" 
          name="type"
          required
          value="<%= site ? site.type : '' %>"
        >
      </div>

      <!-- Max Rig Length -->
      <div class="mb-3">
        <label class="form-label">Max Length (ft)</label>
        <input 
          type="number" 
          class="form-control" 
          name="lengthFt"
          required
          value="<%= site ? site.lengthFt : '' %>"
        >
      </div>

      <!-- Description -->
      <div class="mb-3">
        <label class="form-label">Description</label>
        <textarea class="form-control" name="description" rows="3"><%= site ? site.description : '' %></textarea>
      </div>

      <!-- Active Toggle -->
      <div class="form-check mb-4">
        <input 
          type="checkbox" 
          class="form-check-input" 
          id="active" 
          name="active"
          <%= site && site.active ? 'checked' : '' %>
        >
        <label class="form-check-label" for="active">Active</label>
      </div>

      <!-- Actions -->
      <button class="btn btn-primary" type="submit">Save Site</button>
      <a href="/admin/sites" class="btn btn-secondary ms-2">Cancel</a>

    </form>
  </main>

  <%- include('../partials/footer') %>
</body>
</html>
